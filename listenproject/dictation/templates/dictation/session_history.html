<h1>ğŸ“˜ ç»ƒä¹ å†å²</h1>

<form method="get">
    åˆ†ç±»ï¼š
    <select name="category">
        <option value="">å…¨éƒ¨</option>
        {% for cat in categories %}
            <option value="{{ cat.id }}" {% if cat.id|stringformat:"s" == selected_category %}selected{% endif %}>
                {{ cat.name }}
            </option>
        {% endfor %}
    </select>
    æ—¥æœŸï¼š
    <input type="date" name="start_date" value="{{ start_date }}">
    -
    <input type="date" name="end_date" value="{{ end_date }}">
    <button type="submit">ç­›é€‰</button>
</form>

<table border="1" cellpadding="5">
    <tr>
        <th>æ—¶é—´</th>
        <th>æ¨¡å¼</th>
        <th>æ€»æ•°</th>
        <th>æ­£ç¡®</th>
        <th>é”™è¯¯</th>
    </tr>
    {% for session in page_obj %}
    {% with records=session.answerrecord_set.all %}
    <tr>
        <td>{{ session.created_at|date:"Y-m-d H:i" }}</td>
        <td>{{ session.get_mode_display }}</td>
        <td>{{ records.count }}</td>
        <td>{{ records|dictsortreversed:"is_correct"|length }}</td>
        <td>{{ records|reject:"is_correct"|length }}</td>
    </tr>
    {% endwith %}
    {% endfor %}
</table>
